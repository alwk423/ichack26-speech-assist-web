:root{
  --primary: #111111;
  --primary-dark: #000000;
  --bg: #ffffff;
  --surface: #ffffff;
  --surface-light: #f3f4f6;
  --text: #111111;
  --text-light: #6b7280;
  --accent: #0b5fff;
  --shadow: 0 4px 6px rgba(16,24,40,0.06);
  --shadow-lg: 0 12px 24px rgba(16,24,40,0.08);
  --success: #10B981;
  --red: #dc2626;
  --green: #22c55e;
}

*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Public Sans',sans-serif;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden}

/* Page */
.screen{display:none;min-height:100vh;padding:2rem 1rem;animation:fadeIn .35s ease-out}
.screen.active{display:flex;flex-direction:column}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

/* Header */
.header{text-align:center;margin-bottom:2rem}
.header h1{font-family:'Syne',sans-serif;font-size:2rem;font-weight:700;color:var(--primary);margin-bottom:0.25rem}
.header p{color:var(--text-light);font-size:1rem}

/* Context grid */
.context-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;max-width:900px;margin:0 auto 16px}
.context-card{background:var(--surface);border:1px solid var(--surface-light);border-radius:12px;padding:14px;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:8px;transition:all .12s}
.context-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg);border-color:var(--accent)}
.context-card.selected{background:#f8fafc;border-color:var(--accent);color:var(--text)}
.context-emoji{font-size:28px}
.context-label{font-family:'Syne',sans-serif;font-weight:600;font-size:0.98rem;text-align:center}

/* custom input */
.custom-context{max-width:900px;margin:12px auto}
.custom-input{width:100%;padding:10px;border:1px solid var(--surface-light);border-radius:8px;background:#fff;color:var(--text)}
.custom-input:focus{outline:none;box-shadow:0 0 0 4px rgba(11,95,255,0.06);border-color:var(--accent)}

/* buttons */
.btn-primary{background:var(--primary);color:#fff;border:none;padding:10px 18px;border-radius:10px;font-weight:600;display:block;margin:8px auto;cursor:pointer}
.btn-primary:disabled{opacity:.55;cursor:not-allowed}
.btn-secondary{background:var(--surface);color:var(--text);border:1px solid var(--surface-light);padding:8px 12px;border-radius:8px;cursor:pointer}

/* record */
.record-container{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;max-width:560px;margin:0 auto}
.context-display-emoji{font-size:48px;margin-bottom:6px}
.context-display-text{font-family:'Syne',sans-serif;font-size:1.15rem;font-weight:600;color:var(--text)}

.record-btn{width:160px;height:160px;border-radius:50%;background:var(--primary);border:8px solid var(--surface);color:#fff;font-size:2rem;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow);transition:all .2s}
.record-btn:hover{transform:scale(1.05)}
.record-btn.recording{animation:pulse 2s infinite;background:var(--red)}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(220,38,38,0.12)}50%{box-shadow:0 0 0 15px rgba(220,38,38,0)}100%{box-shadow:0 0 0 0 rgba(220,38,38,0)}}

.record-status{font-size:1rem;color:var(--text-light)}

/* speech screen */
.transcript-display{background:var(--surface);border:1px solid var(--surface-light);border-radius:10px;padding:12px;margin-bottom:12px;max-height:220px;overflow:auto;color:var(--text)}
.tabs{display:flex;gap:6px;margin-bottom:10px}
.tab{background:transparent;border:none;padding:8px 12px;font-family:'Syne',sans-serif;font-weight:600;cursor:pointer;color:var(--text-light)}
.tab.active{color:var(--primary);border-bottom:2px solid var(--primary)}

/* Ensure only the active tab's content is visible */
.tab-content {
  display: none;
  margin-top: 10px
}

.tab-content.active {
  display: block
}
.buttons-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px}
.speech-btn{background:var(--surface);border:1px solid var(--surface-light);border-radius:10px;padding:12px;font-size:15px;cursor:pointer;color:var(--text);transition:all .15s}
.speech-btn:hover{border-color:var(--accent);transform:translateY(-4px);box-shadow:var(--shadow)}

/* bottom-right recording toggle (red by default, green when recording) */
.recording-toggle-bottom{
  position:fixed;bottom:28px;right:28px;width:80px;height:80px;border-radius:50%;background:var(--red);border:none;color:white;box-shadow:0 8px 24px rgba(220,38,38,0.3);cursor:pointer;z-index:60;font-size:0;display:flex;align-items:center;justify-content:center;transition:all .2s;
}
.recording-toggle-bottom:hover{transform:scale(1.08);box-shadow:0 12px 32px rgba(220,38,38,0.4)}
.recording-toggle-bottom.recording{background:var(--green);box-shadow:0 8px 24px rgba(34,197,94,0.3),0 0 0 0 rgba(34,197,94,0.5);animation:pulse-green 2s infinite}
@keyframes pulse-green{0%{box-shadow:0 8px 24px rgba(34,197,94,0.3),0 0 0 0 rgba(34,197,94,0.5)}50%{box-shadow:0 8px 24px rgba(34,197,94,0.3),0 0 0 20px rgba(34,197,94,0)}100%{box-shadow:0 8px 24px rgba(34,197,94,0.3),0 0 0 0 rgba(34,197,94,0)}}

/* circular back btn override for record screen */
.back-btn.circle{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:0;border:1px solid var(--surface-light);background:var(--surface);box-shadow:var(--shadow);position:fixed;top:12px;left:12px;z-index:60;cursor:pointer;color:var(--text)}
.back-btn{position:fixed;top:12px;left:12px;background:var(--surface);border:1px solid var(--surface-light);color:var(--text);width:auto;height:48px;padding:0 10px;border-radius:8px;display:flex;align-items:center;justify-content:center;z-index:50;cursor:pointer}

/* status */
.status-bar{position:fixed;bottom:18px;left:18px;max-width:420px;background:var(--surface);border-radius:10px;padding:10px 12px;color:var(--text);box-shadow:var(--shadow-lg);z-index:100}
.status-bar.error{background:#fee2e2;color:#7f1d1d}
.status-bar.success{background:#ecfdf5;color:#064e3b}

/* responsive */
@media(max-width:640px){
  .context-grid{grid-template-columns:repeat(2,1fr)}
  .record-btn{width:140px;height:140px}
  .context-emoji{font-size:24px}
  .recording-toggle-bottom{width:70px;height:70px;bottom:20px;right:20px}
}